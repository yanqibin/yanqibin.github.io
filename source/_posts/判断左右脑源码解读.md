---
title: 判断左右脑源码解读
date: 2017-10-26 08:37:10
tags:
---
## 左右脑源码解读
>最近看看你的左右脑年龄可以说是非常火，朋友圈有不少朋友人在玩，也看到有大牛对代码进行了解决，对此我也颇感兴趣来解读一番。
地址 ：[http://game.if122.com]

## 数据分析
> 查看其源码 与网络请求，发现其发起了两次请求 `js/index.json` 与`js/index_2.json`。


- 首先 是`js/index.json` ,返回结果为问题题目，共9个节点，第一个如下所示:
```json
{
  "question":"这个男人的眼睛是在一条直线上吗？",
  "answer":{
    "是":"2",
    "否":"2"
  },
  "banner":"images/1_pWzVxxQ.jpg"
}
```
- `js/index_2.json` 中返回年龄与应该展示共个4个节点 每个节点中的word分别为a,b,c,d，第一个节点如下所示：
```json
{"word":"a",
  "name":{
    "one":"25与27岁",
    "two":"39与22岁"
  },
  "output":
  {"img":"images/86DA2WyG5I5uXM1.jpg",
    "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
  },
  "outputtwo":
  {"img":"images/ngeG9PYKAYsdqHtZ.jpg",
    "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
  }
}
```
## 源码解析

- 查看js源码 其中有两个随机数 ansrandom，ansrandom2，ansrandom2 先来看 ansrandom2 ，ansrandom2 的取值只与 `.ad_after .ad_after_section`  有关，查看源码， 里面显示的是二维码等，所以与年龄判断无关,关键代码：
```javascript 
if(ansrandom2%4==0){
	$('.ad_after .ad_after_section:eq(0)')
	.css('display','flex')
	.siblings()
	.hide()
}
 ```
- 查看 ansrandom  ,其结果为选择`js/index_2.json`  选中节点中的随机一个年龄
 ```javascript
 if(ansrandom%2==1){
 	$('.result').prepend('<img src="'+result[index].output.img+'"class="result_img"/>')
 	.find('span').text(result[index].name.one);	
	$('title').text('原来我左右脑年龄是'+result[index].name.one+'，你也来看看');
 }else{
	
	//设置 outputtwo 略
}

 ```
 
 - 接下来判断他是如何选中 `js/index_2.json`  中的节点的
 关键代码:
```javascript
// isNaN 来判断是否是最后一题
if(!isNaN($(this).data("math"))){
	//不是最后一题目 进入下一题
    var num_a=$(this).data("math")-1	$(".question:eq("+num_a+")").show().siblings().hide()
    json[num_a].banner?$(".banner").prop('src',json[num_a].banner):$(".banner").prop('src', json[0].banner)
}else{
	//最后一题目显示结果
	    
}
```
- 通过`js/index.json`  中的`answer` 选择来跳转下一题，而 answer 的 中不同答案除了最后一个，都是相同而是 2，3,4,5,6,7,8,9 最后一个则分表为 abcd
所以前几题的结果都是无用的 年龄判断只与之后一题有关，
 最后一题的`$(this).data("math");`中放的分别是 abcd ，通过匹配abcd 在`js/index_2.json` 中选择出word 相同的节点，再通过 ansrandom 再在节点中随机选个年龄来展示。


## 结论

1. 通过上一题的答案来选择下一题，但除最后一题外，跳转的题目都相同，故没有意义。
1. 最后结果只与最后一题有关，在从你选择的答案中，从预设对应答案中选择选择一个来展示。 
1. 答案对应年龄：
- a: 25与27岁   或  39与22岁
- a: 30与49岁   或  9岁与26岁
- c: 46岁与19岁 或  33岁与5岁
- d: 19与20岁



## 源码附录
- javascript
```javascript
		$(function(){
				var ansrandom=Math.ceil(Math.random()*10)
				console.log(ansrandom)
				$.getJSON("js/index.json",function(json, textStatus) {
						//插入第一张图片
						$('.banner').prop('src', json[0].banner)
						$.each(json, function(index, val) {
							//插入问题
							$("article").append('<section class="question qus_'+index+'"><section class="title">'+val.question+'</section></section>')
							$.each(val.answer, function(index_answer, val_answer) {
								 $('.qus_'+index+'').append('<section class="answer" data-math="'+val_answer+'">'+index_answer+'</section>')
							});
						});
						//点击回答的题目跳转到指定题目
						 $('.answer').on('touchstart',function(){
						 	$(this).addClass("answer_click").siblings().removeClass('answer_click')
						 }).on('click',function() {
						 			var $this=$(this)
								 	if(!isNaN($(this).data("math"))){
								 		var num_a=$(this).data("math")-1
								 		$(".question:eq("+num_a+")").show().siblings().hide()
								 		json[num_a].banner?$(".banner").prop('src', json[num_a].banner):$(".banner").prop('src', json[0].banner)
								 		//显示底部广告
								 		var ansrandom2=Math.ceil(Math.random()*10)
								 		console.log(ansrandom2)
								 		$('.ad_after_section').hide()
								 		if(ansrandom2%4==0){
								 			$('.ad_after .ad_after_section:eq(0)').css('display', 'flex').siblings().hide()
								 		}
								 		else if(ansrandom2%4==1){
								 			$('.ad_after .ad_after_section:eq(1)').css('display', 'flex').siblings().hide()
								 		}
								 		else if(ansrandom2%4==2){
								 			$('.ad_after .ad_after_section:eq(3)').css('display', 'flex').siblings().hide()
								 		}
								 		else{
								 			$('.ad_after .ad_after_section:eq(2)').css('display', 'block').siblings().hide()
								 		}

								 	}
								 	else{
								 		$('.answer').off()
								 		//输出测试结果
								 		$.getJSON('js/index_2.json',function(result, textStatus) {
								 			$.each(result, function(index, val) {
									 			if(val.word==$this.data("math")){
									 				$('.ceng').show()
									 				$('article').hide()
									 				if(ansrandom%2==1){
										 				//$('.result').css("background-image", "url("+result[index].output.img+")").find('span').text(result[index].name.one)
										 				$('.result').prepend('<img src="'+result[index].output.img+'" class="result_img" />').find('span').text(result[index].name.one)
										 				// $('.result').find('p').html(result[index].output.text)
										 				$('title').text('原来我左右脑年龄是'+result[index].name.one+'，你也来看看吧')
									 				}
									 				else{
									 					$('.result').prepend('<img src="'+result[index].outputtwo.img+'" class="result_img" />').find('span').text(result[index].name.two)
										 				// $('.result').find('p').html(result[index].outputtwo.text)
										 				$('title').text('原来我左右脑年龄是'+result[index].name.two+'，你也来看看吧')
									 				}
									 				//广告随机显示
													// if(ansrandom%3==1){
													// 	$('.ad').show()
													// 	$('.ad img').click(function(event) {
													// 		location.href="https://m.ebaodai.com/?user&q=bonus_reg#test-zyn-618hb-171019-01";
													// 	});
													// 	$('.ad_content').on('click', function(event) {
													// 		$('.ad').hide(300)
													// 	});;
													// }
									 			}
								 			});
								 		});	
								 	}	
								 	$('.algin').show()
						});
						 //重新开始游戏按钮
						 $("main").append('<footer class="algin">重新开始</footer>')
						 $('.algin').click(function(event) {
						 	$(".banner").prop('src', json[0].banner)
						 	$('.question:eq(0)').show().siblings().hide()
						 	$(this).hide()
						 });
						 //控制结果层
						 $('.ceng').height($(window).height())
						 //禁止屏幕滑动
						 $(document).on('touchmove', function(event) {
						 	event.preventDefault();
						 });
				});
			})


```

-  /js/index.json

```json
[
	{
		"question":"这个男人的眼睛是在一条直线上吗？",
		"answer":{
				  "是":"2",
				  "否":"2"
				},
        "banner":"images/1_pWzVxxQ.jpg"
	},
	{
		"question":"立方体中的竖线和哪条横向垂直？",
		"answer":{
				  "上面的横线":"3",
				  "下面的横线":"3",
				  "都垂直":"3",
				  "都不垂直":"3"
				},
		"banner":"images/FM2_8yKfpXh.jpg"
	},
	{
		"question":"你能看到图中的字母吗？",
		"answer":{
				  "能":"4",
				  "不能":"4"
				},
		"banner":"images/3_ZomTNDG.jpg"
	},
	{
		"question":"你看到的图中的厨房用品是什么颜色？",
		"answer":{
				  "紫色的":"5",
				  "白色的":"5",
				  "白和紫都有":"5",
				  "都没有看到":"5"
				},
		"banner":"images/4_6GDbV4W.jpg"
	},
	{
		"question":"图中哪个蒙娜丽莎是看向你的？",
		"answer":{
				  "左边的":"6",
				  "右边的":"6",
				  "都是看向我的":"6",
				  "都没有看向我":"6"
				},
		"banner":"images/5_yzK6PJj.jpg"
	},
	{
		"question":"图中红色方块是朝上还是朝下？",
		"answer":{
				  "朝上":"7",
				  "朝下":"7"
				},
		"banner":"images/6_9lAXUKd.jpg"
	},
	{
		"question":"图中你能看到几种动物？",
		"answer":{
				  "一种":"8",
				  "两种":"8",
				  "三种":"8",
				  "四种":"8"
				},
		"banner":"images/7_jLOrEWi.gif"
	},
	{
		"question":"数数有多少个三角形？",
		"answer":{
				  "7":"9",
				  "9":"9",
				  "11":"9",
				  "13":"9"
				},
		"banner":"images/9_iylm414.jpg"
	},
	{
		"question":"图中展开的立方体上标注着a、b、c、d、e、f 六个字母，折成立方体后，您的脑海中浮现的第一个相邻组合是？",
		"answer":{
				  "abc相邻":"a",
				  "acf相邻":"b",
				  "efa相邻":"c",
				  "adf相邻":"d"
				},
		"banner":"images/12_dJKsfTU.jpg"
	}
]
```
- js/index_2.json

```json
[
  {"word":"a",
    "name":{
      "one":"25与27岁",
      "two":"39与22岁"
    },
    "output":
    {"img":"images/86DA2WyG5I5uXM1.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    },
    "outputtwo":
    {"img":"images/ngeG9PYKAYsdqHtZ.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    }
  },
  {"word":"b",
    "name":{
      "one":"30与49岁",
      "two":"9岁与26岁"
    },
    "output":
    {"img":"images/Sb6rmHKkrXW0irwo.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    },
    "outputtwo":{"img":"images/wUwkmDTtFCAgSu0O.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    }
  },
  {"word":"c",
    "name":{
      "one":"46岁与19岁",
      "two":"33岁与5岁"
    },
    "output":
    {"img":"images/xMWg67lzsG6AujVW.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    },
    "outputtwo":{"img":"images/Y9w7ePXHL88e2SA.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    }
  },
  {"word":"d",
    "name":{
      "one":"19与20岁",
      "two":"19与20岁"
    },
    "output":
    {"img":"images/wVcEXeWE7xRhheI.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    },
    "outputtwo":{"img":"images/wVcEXeWE7xRhheI.jpg",
      "text":"李白属于灵活走位，多段位移，七进七出，秀你一脸，比较吃操作的英雄，因此玩家的意识要特别强，才能将该英雄玩的很好。需要多熟悉、多玩，对应新手来说，不是特别适合。"
    }
  }
]

```








 
 
 
 


    
    